

<html>
<head>


<script src="jsfx.js"></script>
<script src="md5.min.js"></script>
<script>
var modules = [
	jsfx.Module.Frequency,
	jsfx.Module.Vibrato,
	jsfx.Module.Guitar,
	jsfx.Module.Volume
];

var base = function(){
	return {
		Frequency: {},
		Volume: {Master:1,Attack:0.021,Sustain:0.35,Punch:1.04,Decay:0.951}
	};
};

var live = jsfx.Live({}, modules);

function MergeParams(base, override){
	if(typeof base === 'function'){
		base = base();
	} else {
		base = JSON.parse(JSON.stringify(base));
	}

	if(typeof override === 'function'){
		override = override();
	}

	for(var name in override){
		if(typeof base[name] === 'undefined'){
			base[name] = {};
		}
		for(var param in override[name]){
			base[name][param] = override[name][param];
		}
	}

	return base;
}

</script>




</head>
<body>
<b>Note this is broken on Chrome ATM.</b>
<button onclick="play()">Static</button>
<script>
var scale = "1234567890abcdef";
var fingerprint = "0a876ba826fbe876b836bd786ba876232";
var tot = md5(fingerprint);
var tot2 = "ffffffffffffffffffffffffffffffff";
var tot3 = (parseInt(tot,16)/parseInt(tot2,16))*1000;
var jump = 3;
function play(){
	(function theLoop (i) {
	setTimeout(function () {
    var freq = (tot3*(1+(parseInt(fingerprint[(i*jump)-2],16)))) * Math.pow(2, scale.indexOf(fingerprint[i-1])/16);
	var freq2 = scale.indexOf(fingerprint[i-1])-15/15;
	var params = MergeParams(base, { "Frequency": {"Start": freq, "DeltaSlide": freq2}});
		live._play(params);
    if (--i) {          // If i > 0, keep going
      theLoop(i);       // Call the loop again, and pass it the current value of i
    }
	}, 100);
	})(fingerprint.length/jump);}

</script>
</body>
</html>